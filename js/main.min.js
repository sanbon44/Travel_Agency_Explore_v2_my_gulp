$(document).ready(function(){$(".header__burger").click(function(e){$(".header__burger, .nav__list").toggleClass("active"),$("body").toggleClass("lock")}),$(".nav__item a").click(function(e){$(".header__burger, .nav__list").removeClass("active"),$("body").removeClass("lock")}),$(".select-block__hotel").click(function(e){$(".select-block__item").removeClass("active"),$(this).addClass("active"),$(".book-now__item-form").removeClass("active"),$(".book-now__hotel").addClass("active")}),$(".select-block__flight").click(function(e){$(".select-block__item").removeClass("active"),$(this).addClass("active"),$(".book-now__item-form").removeClass("active"),$(".book-now__flight").addClass("active")}),$(".select-block__car").click(function(e){$(".select-block__item").removeClass("active"),$(this).addClass("active"),$(".book-now__item-form").removeClass("active"),$(".book-now__car").addClass("active")}),$(".select-block__ship").click(function(e){$(".select-block__item").removeClass("active"),$(this).addClass("active"),$(".book-now__item-form").removeClass("active"),$(".book-now__ship").addClass("active")}),$("a[href*='#']").on("click",function(e){var t=$(this);return $("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},777),e.preventDefault(),!1})}),(()=>{"use strict";let l=(e,t=500)=>{return e.hidden?([a,c=500,i=0]=[e,t],void(a.classList.contains("_slide")||(a.classList.add("_slide"),a.hidden=!a.hidden&&null,i&&a.style.removeProperty("height"),o=a.offsetHeight,a.style.overflow="hidden",a.style.height=i?i+"px":"0px",a.style.paddingTop=0,a.style.paddingBottom=0,a.style.marginTop=0,a.style.marginBottom=0,a.offsetHeight,a.style.transitionProperty="height, margin, padding",a.style.transitionDuration=c+"ms",a.style.height=o+"px",a.style.removeProperty("padding-top"),a.style.removeProperty("padding-bottom"),a.style.removeProperty("margin-top"),a.style.removeProperty("margin-bottom"),window.setTimeout(()=>{a.style.removeProperty("height"),a.style.removeProperty("overflow"),a.style.removeProperty("transition-duration"),a.style.removeProperty("transition-property"),a.classList.remove("_slide")},c)))):([s,i=500,l=0]=[e,t],void(s.classList.contains("_slide")||(s.classList.add("_slide"),s.style.transitionProperty="height, margin, padding",s.style.transitionDuration=i+"ms",s.style.height=s.offsetHeight+"px",s.offsetHeight,s.style.overflow="hidden",s.style.height=l?l+"px":"0px",s.style.paddingTop=0,s.style.paddingBottom=0,s.style.marginTop=0,s.style.marginBottom=0,window.setTimeout(()=>{s.hidden=!l,l||s.style.removeProperty("height"),s.style.removeProperty("padding-top"),s.style.removeProperty("padding-bottom"),s.style.removeProperty("margin-top"),s.style.removeProperty("margin-bottom"),l||s.style.removeProperty("overflow"),s.style.removeProperty("transition-duration"),s.style.removeProperty("transition-property"),s.classList.remove("_slide")},i))));var s,l,a,c,i,o};const a={inputMaskModule:null,selectModule:null};let c={getErrors(e){let t=0,s=e.querySelectorAll("*[data-required]");return s.length&&s.forEach(e=>{null===e.offsetParent&&"SELECT"!==e.tagName||e.disabled||(t+=this.validateInput(e))}),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");var t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.dataset.error&&e.parentElement.insertAdjacentHTML("beforeend",`<div class="form__error">${e.dataset.error}</div>`)},removeError(e){e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(e){e.reset(),setTimeout(()=>{var t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const s=t[e];s.parentElement.classList.remove("_form-focus"),s.classList.remove("_form-focus"),c.removeError(s),s.value=s.dataset.placeholder}let s=e.querySelectorAll(".checkbox__input");if(0<s.length)for(let e=0;e<s.length;e++)s[e].checked=!1;if(a.selectModule){var l=e.querySelectorAll(".select");if(l.length)for(let e=0;e<l.length;e++){const s=l[e].querySelector("select");a.selectModule.selectBuild(s)}}},0)},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};setTimeout(()=>{},0),window.FLS=!0;{let s=new Image;s.onload=s.onerror=function(){{var e=2==s.height,t;document.documentElement.classList.add(!0===e?"webp":"no-webp")}},s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}a.selectModule=new class{constructor(e,t=null){if(this.config=Object.assign({init:!0,logging:!0},e),this.selectClasses={classSelect:"select",classSelectBody:"select__body",classSelectTitle:"select__title",classSelectValue:"select__value",classSelectLabel:"select__label",classSelectInput:"select__input",classSelectText:"select__text",classSelectLink:"select__link",classSelectOptions:"select__options",classSelectOptionsScroll:"select__scroll",classSelectOption:"select__option",classSelectContent:"select__content",classSelectRow:"select__row",classSelectData:"select__asset",classSelectDisabled:"_select-disabled",classSelectTag:"_select-tag",classSelectOpen:"_select-open",classSelectActive:"_select-active",classSelectFocus:"_select-focus",classSelectMultiple:"_select-multiple",classSelectCheckBox:"_select-checkbox",classSelectOptionSelected:"_select-selected"},(this._this=this).config.init){const e=t?document.querySelectorAll(t):document.querySelectorAll("select");e.length?(this.selectsInit(e),this.setLogging(`Проснулся, построил селектов: (${e.length})`)):this.setLogging("Сплю, нет ни одного select zzZZZzZZz")}}getSelectClass(e){return"."+e}getSelectElement(e,t){return{originalSelect:e.querySelector("select"),selectElement:e.querySelector(this.getSelectClass(t))}}selectsInit(e){e.forEach((e,t)=>{this.selectInit(e,t+1)}),document.addEventListener("click",function(e){this.selectsActions(e)}.bind(this)),document.addEventListener("keydown",function(e){this.selectsActions(e)}.bind(this)),document.addEventListener("focusin",function(e){this.selectsActions(e)}.bind(this)),document.addEventListener("focusout",function(e){this.selectsActions(e)}.bind(this))}selectInit(e,t){const s=this;var l=document.createElement("div");l.classList.add(this.selectClasses.classSelect),e.parentNode.insertBefore(l,e),l.appendChild(e),e.hidden=!0,t&&(e.dataset.id=t),l.insertAdjacentHTML("beforeend",`<div class="${this.selectClasses.classSelectBody}"><div hidden class="${this.selectClasses.classSelectOptions}"></div></div>`),this.selectBuild(e),this.getSelectPlaceholder(e)&&(e.dataset.placeholder=this.getSelectPlaceholder(e).value,this.getSelectPlaceholder(e).label.show)&&this.getSelectElement(l,this.selectClasses.classSelectTitle).selectElement.insertAdjacentHTML("afterbegin",`<span class="${this.selectClasses.classSelectLabel}">${this.getSelectPlaceholder(e).label.text?this.getSelectPlaceholder(e).label.text:this.getSelectPlaceholder(e).value}</span>`),e.dataset.speed=e.dataset.speed||"150",e.addEventListener("change",function(e){s.selectChange(e)})}selectBuild(e){var t=e.parentElement;t.dataset.id=e.dataset.id,t.classList.add(e.getAttribute("class")?"select_"+e.getAttribute("class"):""),e.multiple?t.classList.add(this.selectClasses.classSelectMultiple):t.classList.remove(this.selectClasses.classSelectMultiple),e.hasAttribute("data-checkbox")&&e.multiple?t.classList.add(this.selectClasses.classSelectCheckBox):t.classList.remove(this.selectClasses.classSelectCheckBox),this.setSelectTitleValue(t,e),this.setOptions(t,e),e.hasAttribute("data-search")&&this.searchActions(t),e.hasAttribute("data-open")&&this.selectAction(t),this.selectDisabled(t,e)}selectsActions(e){const t=e.target,s=e.type;if(t.closest(this.getSelectClass(this.selectClasses.classSelect))||t.closest(this.getSelectClass(this.selectClasses.classSelectTag))){var l=t.closest(".select")?t.closest(".select"):document.querySelector(`.${this.selectClasses.classSelect}[data-id="${t.closest(this.getSelectClass(this.selectClasses.classSelectTag)).dataset.selectId}"]`),a=this.getSelectElement(l).originalSelect;if("click"===s){if(!a.disabled)if(t.closest(this.getSelectClass(this.selectClasses.classSelectTag))){const e=t.closest(this.getSelectClass(this.selectClasses.classSelectTag)),s=document.querySelector(`.${this.selectClasses.classSelect}[data-id="${e.dataset.selectId}"] .select__option[data-value="${e.dataset.value}"]`);this.optionAction(l,a,s)}else if(t.closest(this.getSelectClass(this.selectClasses.classSelectTitle)))this.selectAction(l);else if(t.closest(this.getSelectClass(this.selectClasses.classSelectOption))){const e=t.closest(this.getSelectClass(this.selectClasses.classSelectOption));this.optionAction(l,a,e)}}else"focusin"===s||"focusout"===s?t.closest(this.getSelectClass(this.selectClasses.classSelect))&&("focusin"===s?l.classList.add(this.selectClasses.classSelectFocus):l.classList.remove(this.selectClasses.classSelectFocus)):"keydown"===s&&"Escape"===e.code&&this.selectsСlose()}else this.selectsСlose()}"selectsСlose"(){var e=document.querySelectorAll(""+this.getSelectClass(this.selectClasses.classSelect)+this.getSelectClass(this.selectClasses.classSelectOpen));e.length&&e.forEach(e=>{this.selectAction(e)})}selectAction(e){var t=this.getSelectElement(e).originalSelect,s=this.getSelectElement(e,this.selectClasses.classSelectOptions).selectElement;s.classList.contains("_slide")||(e.classList.toggle(this.selectClasses.classSelectOpen),l(s,t.dataset.speed))}setSelectTitleValue(e,t){var s=this.getSelectElement(e,this.selectClasses.classSelectBody).selectElement,l=this.getSelectElement(e,this.selectClasses.classSelectTitle).selectElement;l&&l.remove(),s.insertAdjacentHTML("afterbegin",this.getSelectTitleValue(e,t))}getSelectTitleValue(t,e){let s=this.getSelectedOptionsData(e,2).html;if(s=(s=e.multiple&&e.hasAttribute("data-tags")&&(s=this.getSelectedOptionsData(e).elements.map(e=>`<span role="button" data-select-id="${t.dataset.id}" data-value="${e.value}" class="_select-tag">${this.getSelectElementContent(e)}</span>`).join(""),e.dataset.tags)&&document.querySelector(e.dataset.tags)&&(document.querySelector(e.dataset.tags).innerHTML=s,e.hasAttribute("data-search"))?!1:s).length?s:e.dataset.placeholder,this.getSelectedOptionsData(e).values.length?t.classList.add(this.selectClasses.classSelectActive):t.classList.remove(this.selectClasses.classSelectActive),e.hasAttribute("data-search"))return`<div class="${this.selectClasses.classSelectTitle}"><span class="${this.selectClasses.classSelectValue}"><input autocomplete="off" type="text" placeholder="${s}" data-placeholder="${s}" class="${this.selectClasses.classSelectInput}"></span></div>`;{const t=this.getSelectedOptionsData(e).elements.length&&this.getSelectedOptionsData(e).elements[0].dataset.class?" "+this.getSelectedOptionsData(e).elements[0].dataset.class:"";return`<button type="button" class="${this.selectClasses.classSelectTitle}"><span class="${this.selectClasses.classSelectValue}"><span class="${this.selectClasses.classSelectContent}${t}">${s}</span></span></button>`}}getSelectElementContent(e){var t=e.dataset.asset?""+e.dataset.asset:"",s=0<=t.indexOf("img")?`<img src="${t}" alt="">`:t,l="";return(l+=t?`<span class="${this.selectClasses.classSelectRow}">`:"")+(t?`<span class="${this.selectClasses.classSelectData}">`:"")+(t?s:"")+(t?"</span>":"")+(t?`<span class="${this.selectClasses.classSelectText}">`:"")+e.textContent+(t?"</span>":"")+(t?"</span>":"")}getSelectPlaceholder(e){e=Array.from(e.options).find(e=>!e.value);if(e)return{value:e.textContent,show:e.hasAttribute("data-show"),label:{show:e.hasAttribute("data-label"),text:e.dataset.label}}}getSelectedOptionsData(e,t){let s=[];return e.multiple?s=Array.from(e.options).filter(e=>e.value).filter(e=>e.selected):s.push(e.options[e.selectedIndex]),{elements:s.map(e=>e),values:s.filter(e=>e.value).map(e=>e.value),html:s.map(e=>this.getSelectElementContent(e))}}getOptions(s){let e=s.hasAttribute("data-scroll")?"data-simplebar":"",l=s.dataset.scroll?`style="max-height:${s.dataset.scroll}px"`:"",a=Array.from(s.options);if(0<a.length){let t="";return(this.getSelectPlaceholder(s)&&!this.getSelectPlaceholder(s).show||s.multiple)&&(a=a.filter(e=>e.value)),t+=e?`<div ${e} ${l} class="${this.selectClasses.classSelectOptionsScroll}">`:"",a.forEach(e=>{t+=this.getOption(e,s)}),t+=e?"</div>":""}}getOption(e,t){var s=e.selected&&t.multiple?" "+this.selectClasses.classSelectOptionSelected:"",t=e.selected&&!t.hasAttribute("data-show-selected")?"hidden":"",l=e.dataset.class?" "+e.dataset.class:"",a=!!e.dataset.href&&e.dataset.href,c=e.hasAttribute("data-href-blank")?'target="_blank"':"",i="";return(i+=a?`<a ${c} ${t} href="${a}" data-value="${e.value}" class="${this.selectClasses.classSelectOption}${l}${s}">`:`<button ${t} class="${this.selectClasses.classSelectOption}${l}${s}" data-value="${e.value}" type="button">`)+this.getSelectElementContent(e)+(a?"</a>":"</button>")}setOptions(e,t){this.getSelectElement(e,this.selectClasses.classSelectOptions).selectElement.innerHTML=this.getOptions(t)}optionAction(e,t,s){t.multiple?(s.classList.toggle(this.selectClasses.classSelectOptionSelected),this.getSelectedOptionsData(t).elements.forEach(e=>{e.removeAttribute("selected")}),e.querySelectorAll(this.getSelectClass(this.selectClasses.classSelectOptionSelected)).forEach(e=>{t.querySelector(`option[value="${e.dataset.value}"]`).setAttribute("selected","selected")})):(t.hasAttribute("data-show-selected")||(e.querySelector(this.getSelectClass(this.selectClasses.classSelectOption)+"[hidden]")&&(e.querySelector(this.getSelectClass(this.selectClasses.classSelectOption)+"[hidden]").hidden=!1),s.hidden=!0),t.value=s.hasAttribute("data-value")?s.dataset.value:s.textContent,this.selectAction(e)),this.setSelectTitleValue(e,t),this.setSelectChange(t)}selectChange(e){e=e.target;this.selectBuild(e),this.setSelectChange(e)}setSelectChange(e){e.hasAttribute("data-validate")&&c.validateInput(e),e.hasAttribute("data-submit")&&e.value&&((t=document.createElement("button")).type="submit",e.closest("form").append(t),t.click(),t.remove());var t=e.parentElement;this.selectCallback(t,e)}selectDisabled(e,t){t.disabled?(e.classList.add(this.selectClasses.classSelectDisabled),this.getSelectElement(e,this.selectClasses.classSelectTitle).selectElement.disabled=!0):(e.classList.remove(this.selectClasses.classSelectDisabled),this.getSelectElement(e,this.selectClasses.classSelectTitle).selectElement.disabled=!1)}searchActions(e){this.getSelectElement(e).originalSelect;const t=this.getSelectElement(e,this.selectClasses.classSelectInput).selectElement,s=this.getSelectElement(e,this.selectClasses.classSelectOptions).selectElement,l=s.querySelectorAll("."+this.selectClasses.classSelectOption),a=this;t.addEventListener("input",function(){l.forEach(e=>{0<=e.textContent.toUpperCase().indexOf(t.value.toUpperCase())?e.hidden=!1:e.hidden=!0}),!0===s.hidden&&a.selectAction(e)})}selectCallback(e,t){document.dispatchEvent(new CustomEvent("selectCallback",{detail:{select:t}}))}setLogging(e){var t;this.config.logging&&(t="[select]: "+e,setTimeout(()=>{window.FLS&&console.log(t)},0))}}({})})(),(()=>{"use strict";setTimeout(()=>{},0),window.FLS=!0;{let s=new Image;s.onload=s.onerror=function(){{var e=2==s.height,t;document.documentElement.classList.add(!0===e?"webp":"no-webp")}},s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}new class{constructor(e){this.config=Object.assign({logging:!0},e),this.observer,document.documentElement.classList.contains("watcher")||this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.classList.add("watcher"),this.scrollWatcherConstructor(document.querySelectorAll("[data-watch]"))}scrollWatcherConstructor(c){c.length?(this.scrollWatcherLogging(`Проснулся, слежу за объектами (${c.length})...`),Array.from(c).map(function(e){return`${e.dataset.watchRoot||null}|${e.dataset.watchMargin||"0px"}|`+(e.dataset.watchThreshold||0)}).filter(function(e,t,s){return s.indexOf(e)===t}).forEach(e=>{let t=e.split("|"),a={root:t[0],margin:t[1],threshold:t[2]},s=Array.from(c).filter(function(e){var t=e.dataset.watchRoot||null,s=e.dataset.watchMargin||"0px",l=e.dataset.watchThreshold||0;if(String(t)===a.root&&String(s)===a.margin&&String(l)===a.threshold)return e}),l=this.getScrollWatcherConfig(a);this.scrollWatcherInit(s,l)})):this.scrollWatcherLogging("Сплю, нет объектов для слежения. ZzzZZzz")}getScrollWatcherConfig(t){var e={};if(document.querySelector(t.root)?e.root=document.querySelector(t.root):"null"!==t.root&&this.scrollWatcherLogging(`Эмм... родительского объекта ${t.root} нет на странице`),e.rootMargin=t.margin,!(t.margin.indexOf("px")<0&&t.margin.indexOf("%")<0)){if("prx"===t.threshold){t.threshold=[];for(let e=0;e<=1;e+=.005)t.threshold.push(e)}else t.threshold=t.threshold.split(",");return e.threshold=t.threshold,e}this.scrollWatcherLogging("Ой ой, настройку data-watch-margin нужно задавать в PX или %")}scrollWatcherCreate(e){this.observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{this.scrollWatcherCallback(e,t)})},e)}scrollWatcherInit(e,t){this.scrollWatcherCreate(t),e.forEach(e=>this.observer.observe(e))}scrollWatcherIntersecting(e,t){e.isIntersecting?(t.classList.contains("_watcher-view")||t.classList.add("_watcher-view"),this.scrollWatcherLogging(`Я вижу ${t.classList}, добавил класс _watcher-view`)):(t.classList.contains("_watcher-view")&&t.classList.remove("_watcher-view"),this.scrollWatcherLogging(`Я не вижу ${t.classList}, убрал класс _watcher-view`))}scrollWatcherOff(e,t){t.unobserve(e),this.scrollWatcherLogging("Я перестал следить за "+e.classList)}scrollWatcherLogging(e){var t;this.config.logging&&(t="[Наблюдатель]: "+e,setTimeout(()=>{window.FLS&&console.log(t)},0))}scrollWatcherCallback(e,t){var s=e.target;this.scrollWatcherIntersecting(e,s),s.hasAttribute("data-watch-once")&&e.isIntersecting&&this.scrollWatcherOff(s,t),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:e}}))}}({})})();